<canvas id='canvas' style="width: 500px; height:500px;"></canvas>
<img id="tex" crossorigin="anonymous" />
<script src="./common.js"></script>
<script>
  const size = 500;
  const repeat = 5;
  const imgurl = 'img2.png';

  const texImage = document.getElementById('tex');
  texImage.onerror = (err) => {
    console.error('Failed to load image', err.message)
  }
  console.log('starting to load tex')
  texImage.style.width = `${size/repeat}px`;
  texImage.style.height = `${size/repeat}px`;
  texImage.src = imgurl;
  texImage.onload = () => {
    console.log('tex loaded')
    const canvas = document.getElementById('canvas');
    canvas.style.width = `${size}px`;
    canvas.style.height = `${size}px`;
    const renderer = window.createRenderer(
      document.getElementById('canvas'),
      size * window.devicePixelRatio,
      size * window.devicePixelRatio,
      {useGL2: true, repeat, mipmap:true, srgb: true}
    );
    renderer(texImage);
  }
</script>